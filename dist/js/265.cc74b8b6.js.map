{"version":3,"file":"js/265.cc74b8b6.js","mappings":"mQAEaA,MAAM,U,UACXC,EAAAA,EAAAA,GAEM,aADFA,EAAAA,EAAAA,GAA4E,OAAvED,MAAM,YAAYE,MAAM,cAAcC,IAAAC,MAD/C,K,GAGKJ,MAAM,kB,oBAUPC,EAAAA,EAAAA,GAA+B,OAA1BD,MAAM,eAAa,W,+HAfhCK,EAAAA,EAAAA,IAA0DC,EAAA,CAA9CC,IAAKC,EAAAA,IAAMC,KAAMD,EAAAA,KAAOE,SAAUF,EAAAA,UAA9C,mCACAP,EAAAA,EAAAA,GAoBU,UApBV,EAoBU,CAnBNU,GAGAV,EAAAA,EAAAA,GAeM,MAfN,EAeM,EAdFA,EAAAA,EAAAA,GACiB,SADVW,KAAK,QAASZ,OAAK,+BAAyBQ,EAAAA,SAAQ,MAAOK,YAAY,QAAQC,GAAG,QACrFC,KAAK,SADT,QAEWP,EAAAA,SAAAA,EAAAA,EAAAA,OAAXQ,EAAAA,EAAAA,IAKM,MAAAC,EAAA,WAJFhB,EAAAA,EAAAA,GACoC,SAD7BW,KAAK,WAAYZ,OAAK,wBAAkBQ,EAAAA,SAAQ,MAAOM,GAAG,WAAWD,YAAY,QACpFE,KAAK,W,qCAAoBP,EAAAA,MAAKU,IADlC,eAC6BV,EAAAA,UAG3B,SAFFP,EAAAA,EAAAA,GACmE,SAD5DW,KAAK,WAAYZ,OAAK,wBAAkBQ,EAAAA,SAAQ,MAAOM,GAAG,YAC7DD,YAAY,iBAAiBE,KAAK,Y,qCAAqBP,EAAAA,OAAMU,IADjE,eAC2DV,EAAAA,cAJ/D,eAOAW,GACAlB,EAAAA,EAAAA,GAES,UAFDD,MAAM,gBAAiBoB,QAAK,eAAEC,EAAAA,eAAtC,CAAgEb,EAAAA,kBAAAA,EAAAA,EAAAA,OAAZQ,EAAAA,EAAAA,IAA+C,OAAAM,EAAlB,iBAA7B,eAC9Bd,EAAAA,UAAAA,EAAAA,EAAAA,OAAlBe,EAAAA,EAAAA,IAA6BC,EAAA,CAAAC,IAAAA,MAA7B,sBAhBZ,G,sDA2BJ,GACIV,KAAM,oBACNW,KAAM,KAAM,CACRZ,GAAI,GACJa,MAAO,GACPC,OAAQ,GACRC,MAAO,GACPC,QAAQ,EACRC,SAAS,EACTC,iBAAiB,EACjBC,SAAU,CAAC,GAAI,GAAI,IACnB1B,IAAK,GACLE,KAAM,GACNC,SAAU,iBACVwB,WAAY,CACZC,WADY,IAEZC,UAASA,EAAAA,GAEbC,QAAS,CACLC,SACI,IAAIC,EAAO,GAuCX,OAtC0B,IAAtBC,KAAKX,MAAMY,SACXF,EAAKG,KAAK,oBACVF,KAAKP,SAAS,GAAK,YAEnBO,KAAKX,MAAMY,OAAS,IACfE,IAAAA,QAAkBH,KAAKX,OAKxBW,KAAKP,SAAS,GAAK,IAJnBM,EAAKG,KAAK,kBACVF,KAAKP,SAAS,GAAK,aAMvBO,KAAKV,SACqB,IAAtBU,KAAKb,MAAMc,SACXF,EAAKG,KAAK,eACVF,KAAKP,SAAS,GAAK,YAGnBO,KAAKb,MAAMc,OAAS,IACpBD,KAAKP,SAAS,GAAK,IAEI,IAAvBO,KAAKZ,OAAOa,SACZF,EAAKG,KAAK,eACVF,KAAKP,SAAS,GAAK,YAGnBO,KAAKZ,OAAOa,OAAS,IACrBD,KAAKP,SAAS,GAAK,IAEnBO,KAAKb,MAAMc,OAAS,GAAKD,KAAKZ,OAAOa,OAAS,GAC1CD,KAAKb,QAAUa,KAAKZ,SACpBW,EAAKG,KAAK,wBACVF,KAAKP,SAAS,GAAK,WACnBO,KAAKP,SAAS,GAAK,aAIxBM,CACV,EACDK,mBACI,IAAIL,EAAOC,KAAKF,SAKhB,GAJIC,EAAKE,OAAS,IACdD,KAAKjC,IAAMgC,EACXC,KAAK/B,KAAO,gBAEI,IAAhB8B,EAAKE,OAAc,CAGnB,GAFAD,KAAKR,iBAAkB,EACvBQ,KAAKT,SAAU,EACC,KAAZS,KAAK1B,GAAW,CACf,MAAM+B,QAAeC,EAAAA,EAAAA,KAAW,iBAAkBN,KAAKX,OACpDW,KAAKb,MAAQkB,EAASnB,KAAKqB,KAC3BP,KAAK1B,GAAK+B,EAASnB,KAAKqB,KAAKC,IAE7BR,KAAK1B,IACL0B,KAAKR,iBAAkB,EACvBQ,KAAKT,SAAU,EACfS,KAAKV,QAAS,IAEdU,KAAKR,iBAAkB,EACvBQ,KAAKT,SAAU,EACfS,KAAKV,QAAS,EAEtB,CACA,GAAIU,KAAK1B,GAAI,CACT,MAAMa,EAAQ,CACVsB,SAAUT,KAAKb,MACfuB,UAAWV,KAAKZ,QAGdiB,QAAiBC,EAAAA,EAAAA,IAAW,uBAAsBN,KAAK1B,KAAMa,GAC/DkB,EAASnB,KAAKsB,KACdR,KAAKjC,IAAM,6BACXiC,KAAK/B,KAAO,kBAGZ+B,KAAKT,SAAU,EACfS,KAAKR,iBAAkB,EACvBQ,KAAKjC,IAAMsC,EAASnB,KACpBc,KAAK/B,KAAO,eAEpB,CACJ,CAEJ,I,QC/HR,MAAM0C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://nticpd/./src/components/login/EsqueceuSenha.vue","webpack://nticpd/./src/components/login/EsqueceuSenha.vue?5e09"],"sourcesContent":["<template>\r\n    <mensagens :msg=\"msg\" :tipo=\"tipo\" :possicao=\"possicao\" />\r\n    <section class=\"sencao\">\r\n        <div>\r\n            <img class=\"img-login\" title=\"logo do nti\" src=\"../../assets/img/paulo.png\">\r\n        </div>\r\n        <div class=\"login-esqueceu\">\r\n            <input type=\"email\" :class=\"`form-control margin ${invalida[0]}`\" placeholder=\"Email\" id=\"email\"\r\n                name=\"email\">\r\n            <div v-if=\"exibir\">\r\n                <input type=\"password\" :class=\"`form-control ${invalida[1]}`\" id=\"password\" placeholder=\"senha\"\r\n                    name=\"password\" v-model=\"senha\">\r\n                <input type=\"password\" :class=\"`form-control ${invalida[2]}`\" id=\"password2\"\r\n                    placeholder=\"confirma senha\" name=\"password2\" v-model=\"senha2\">\r\n            </div>\r\n\r\n            <div class=\"traco-login\"></div>\r\n            <button class=\"buttonLogin-1\" @click=\"mudarSenha()\"><span v-if=\"esqueceuLoading\">mudar Senha</span>\r\n                <loadingVue v-if=\"loading\" />\r\n            </button>\r\n\r\n        </div>\r\n    </section>\r\n</template>\r\n<script>\r\nimport axios from '@/service/axios';\r\nimport loadingVue from \"../loading.vue\";\r\nimport validator from \"validator\";\r\nimport mensagens from '../mensagens.vue';\r\nexport default {\r\n    name: 'EsqueceuSenhaView',\r\n    data: () => ({\r\n        id: \"\",\r\n        senha: \"\",\r\n        senha2: \"\",\r\n        email: \"\",\r\n        exibir: false,\r\n        loading: false,\r\n        esqueceuLoading: true,\r\n        invalida: [\"\", \"\", \"\"],\r\n        msg: \"\",\r\n        tipo: \"\",\r\n        possicao: \"cimaMensagen\"\r\n    }), components: {\r\n        loadingVue,\r\n        mensagens\r\n    },\r\n    methods: {\r\n        valida() {\r\n            let erro = [];\r\n            if (this.email.length === 0) {\r\n                erro.push('email está vazio');\r\n                this.invalida[0] = 'invalido';\r\n            }\r\n            if (this.email.length > 0) {\r\n                if (!validator.isEmail(this.email)) {\r\n                    erro.push('email invalido');\r\n                    this.invalida[0] = 'invalido';\r\n                }\r\n                else {\r\n                    this.invalida[0] = \"\";\r\n                }\r\n            }\r\n            if (this.exibir) {\r\n                if (this.senha.length === 0) {\r\n                    erro.push('senha vazia');\r\n                    this.invalida[1] = 'invalido';\r\n                }\r\n\r\n                if (this.senha.length > 0) {\r\n                    this.invalida[1] = \"\";\r\n                }\r\n                if (this.senha2.length === 0) {\r\n                    erro.push('senha vazia');\r\n                    this.invalida[2] = 'invalido';\r\n                }\r\n\r\n                if (this.senha2.length > 0) {\r\n                    this.invalida[2] = \"\";\r\n                }\r\n                if (this.senha.length > 0 && this.senha2.length > 0) {\r\n                    if (this.senha !== this.senha2) {\r\n                        erro.push('senha não são iquais');\r\n                        this.invalida[1] = 'invalido';\r\n                        this.invalida[2] = 'invalido';\r\n                    }\r\n                }\r\n            }\r\n            return erro;\r\n        },\r\n        async mudarSenha() {\r\n            let erro = this.valida();\r\n            if (erro.length > 0) {\r\n                this.msg = erro;\r\n                this.tipo = \"alert-danger\"\r\n            }\r\n            if (erro.length === 0) {\r\n                this.esqueceuLoading = false;\r\n                this.loading = true;\r\n                if (this.id === \"\") {\r\n                     const response=await axios.post('/esqueceusenha', this.email)\r\n                        this.senha = response.data.user;\r\n                        this.id = response.data.user._id\r\n                    \r\n                    if (this.id) {\r\n                        this.esqueceuLoading = true;\r\n                        this.loading = false;\r\n                        this.exibir = true\r\n                    } else {\r\n                        this.esqueceuLoading = true;\r\n                        this.loading = false;\r\n                        this.exibir = false\r\n                    }\r\n                }\r\n                if (this.id) {\r\n                    const senha = {\r\n                        password: this.senha,\r\n                        password2: this.senha2\r\n\r\n                    }\r\n                    const response = await axios.put(`/registersenha/edit/${this.id}`, senha)\r\n                    if (response.data._id) {\r\n                        this.msg = \"senha alterada com sucesso\";\r\n                        this.tipo = \"alert-success\"\r\n                    }\r\n                    else {\r\n                        this.loading = false;\r\n                        this.esqueceuLoading = true;\r\n                        this.msg = response.data;\r\n                        this.tipo = \"alert-danger\"\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n@import '~@/assets/css/styleLogin.css';\r\n</style>\r\n","import { render } from \"./EsqueceuSenha.vue?vue&type=template&id=49032a1a&scoped=true\"\nimport script from \"./EsqueceuSenha.vue?vue&type=script&lang=js\"\nexport * from \"./EsqueceuSenha.vue?vue&type=script&lang=js\"\n\nimport \"./EsqueceuSenha.vue?vue&type=style&index=0&id=49032a1a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\tempVUe\\\\ntiCpd-frontEnd\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-49032a1a\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","title","src","_imports_0","_createVNode","_component_mensagens","msg","_ctx","tipo","possicao","_hoisted_2","type","placeholder","id","name","_createElementBlock","_hoisted_4","$event","_hoisted_5","onClick","$options","_hoisted_6","_createBlock","_component_loadingVue","key","data","senha","senha2","email","exibir","loading","esqueceuLoading","invalida","components","loadingVue","mensagens","methods","valida","erro","this","length","push","validator","async","response","axios","user","_id","password","password2","__exports__","render"],"sourceRoot":""}